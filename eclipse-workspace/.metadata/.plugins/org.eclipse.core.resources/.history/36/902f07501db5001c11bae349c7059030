/*
 * main.cpp
 *
 *  Created on: Apr 5, 2022
 *      Author: David
 */
// Dvojno povrzana kruzna lista
#include<iostream>

using namespace std;

struct jazol{	// pravime  next i prev bidejki e dvojno povrzana i init za da dodavame prethodnik i sledbenik na jazolot vo nego
	int info;
	jazol *next;
	jazol *prev;
	void init(int infoF,jazol *nextF,jazol *prevF){
		info = infoF;
		next = nextF;
		prev = prevF;
	}
};
struct DPKLista{		// imame head i tail bidejki dvojno povrzana i kruzna, so init site na NULL
	jazol *head;
	jazol *tail;
	void init(){
		head = tail = NULL;
	}
	void dodadiPrv(int x){		// pravime nov jazol, potoa mu davame info
		jazol *nov = new jazol;
		nov->info = x;
		if(head == NULL){		// ako listata e przna nov go vrzuvame sam so sebe, pa potoa gi pravime i head i tail da pokazuvaat na nov
			nov->next = nov->prev = nov;
			head = tail = nov;
			return;
		}
		nov->next = head;
		head->prev = nov;
		head = nov;
		tail->next = head;
		head->prev = tail;
	}
	void dodadiPos(int x){
		jazol *nov = new jazol;
		nov->info = x;
		if(head == NULL){
			dodadiPrv(x);
			return;
		}
		tail->next = nov;
		nov->prev = tail;
		tail = nov;
		tail->next = head;
		head->prev = tail;
	}
	void brisiPrv(){
		if(head->next == head){ // ako imame eden jazol
			delete head;
			head = tail = NULL;
			return;
		}
		tail->next = head->next;
		head->next->prev = tail;
		delete head;
		head = tail->next;
	}
	void brisiPosleden(){
		if(head->next == head){
			delete head;
			head = tail = NULL;
			return;
		}
		head->prev = tail->prev; /// tuka imam razlicno vidi dali ke raboti
		tail->prev->next = head;
		delete tail;
		tail = head->prev;
	}
	void pecati(){
		jazol *dvizi = head;
		if(head == NULL){
			cout<<"Nemam sto da pecatam"<<endl;
			return;
		}
		if(head != NULL){
			do{
				cout<<"<->|"<<dvizi->info<<"|<->";
				dvizi = dvizi->next;
			}while(dvizi != head);
		}
	}
};

int main(){
	DPKLista dk1;
	dk1.init();
	dk1.dodadiPrv(24);
	dk1.dodadiPos(65);
	dk1.dodadiPos(1000);
	dk1.dodadiPos(69);
	dk1.pecati();
	cout<<endl;
	dk1.brisiPosleden();
	dk1.pecati();
	cout<<endl;
	dk1.brisiPrv();
	dk1.pecati();


	return 0;
}

